<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>URY playd: SdlAudioSink Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">URY playd
   </div>
   <div id="projectbrief">C++ minimalist audio player</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classSdlAudioSink.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classSdlAudioSink-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SdlAudioSink Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An output stream for audio, using SDL.  
 <a href="classSdlAudioSink.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="audio__sink_8hpp_source.html">audio_sink.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for SdlAudioSink:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classSdlAudioSink__inherit__graph.svg" width="115" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for SdlAudioSink:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classSdlAudioSink__coll__graph.svg" width="448" height="144"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7d0cc5209c95298c6a0badd756367e32"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a7d0cc5209c95298c6a0badd756367e32">SdlAudioSink</a> (const <a class="el" href="classAudioSource.html">AudioSource</a> &amp;source, int device_id)</td></tr>
<tr class="memdesc:a7d0cc5209c95298c6a0badd756367e32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs an <a class="el" href="classSdlAudioSink.html" title="An output stream for audio, using SDL. ">SdlAudioSink</a>.  <a href="#a7d0cc5209c95298c6a0badd756367e32">More...</a><br /></td></tr>
<tr class="separator:a7d0cc5209c95298c6a0badd756367e32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10bff5bf83d1979bf54ab49827e1f806"><td class="memItemLeft" align="right" valign="top"><a id="a10bff5bf83d1979bf54ab49827e1f806"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a10bff5bf83d1979bf54ab49827e1f806">~SdlAudioSink</a> () override</td></tr>
<tr class="memdesc:a10bff5bf83d1979bf54ab49827e1f806"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructs an <a class="el" href="classSdlAudioSink.html" title="An output stream for audio, using SDL. ">SdlAudioSink</a>. <br /></td></tr>
<tr class="separator:a10bff5bf83d1979bf54ab49827e1f806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae825ec1b65e671a013cb06710d32e5c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#ae825ec1b65e671a013cb06710d32e5c9">Start</a> () override</td></tr>
<tr class="memdesc:ae825ec1b65e671a013cb06710d32e5c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the audio stream.  <a href="#ae825ec1b65e671a013cb06710d32e5c9">More...</a><br /></td></tr>
<tr class="separator:ae825ec1b65e671a013cb06710d32e5c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a046e55bf5bb91461179d3e9d3f7d510a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a046e55bf5bb91461179d3e9d3f7d510a">Stop</a> () override</td></tr>
<tr class="memdesc:a046e55bf5bb91461179d3e9d3f7d510a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the audio stream.  <a href="#a046e55bf5bb91461179d3e9d3f7d510a">More...</a><br /></td></tr>
<tr class="separator:a046e55bf5bb91461179d3e9d3f7d510a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80a7f1983b286f2bfd31e9bca4275df7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4">Audio::State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a80a7f1983b286f2bfd31e9bca4275df7">State</a> () override</td></tr>
<tr class="memdesc:a80a7f1983b286f2bfd31e9bca4275df7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets this <a class="el" href="classAudioSink.html" title="Abstract class for audio output sinks. ">AudioSink</a>'s current state (playing/stopped/at end).  <a href="#a80a7f1983b286f2bfd31e9bca4275df7">More...</a><br /></td></tr>
<tr class="separator:a80a7f1983b286f2bfd31e9bca4275df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a222f3a89cdbccb1853c706e80314a5ca"><td class="memItemLeft" align="right" valign="top">std::uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a222f3a89cdbccb1853c706e80314a5ca">Position</a> () override</td></tr>
<tr class="memdesc:a222f3a89cdbccb1853c706e80314a5ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current played position in the song, in samples.  <a href="#a222f3a89cdbccb1853c706e80314a5ca">More...</a><br /></td></tr>
<tr class="separator:a222f3a89cdbccb1853c706e80314a5ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48ff24e2977ac9ac73c79e94732acb85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a48ff24e2977ac9ac73c79e94732acb85">SetPosition</a> (std::uint64_t samples) override</td></tr>
<tr class="memdesc:a48ff24e2977ac9ac73c79e94732acb85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the current played position, given a position in samples.  <a href="#a48ff24e2977ac9ac73c79e94732acb85">More...</a><br /></td></tr>
<tr class="separator:a48ff24e2977ac9ac73c79e94732acb85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa29d2acc2289b7ffdb84d72b50d2221"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#aaa29d2acc2289b7ffdb84d72b50d2221">SourceOut</a> () override</td></tr>
<tr class="memdesc:aaa29d2acc2289b7ffdb84d72b50d2221"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells this <a class="el" href="classAudioSink.html" title="Abstract class for audio output sinks. ">AudioSink</a> that the source has run out.  <a href="#aaa29d2acc2289b7ffdb84d72b50d2221">More...</a><br /></td></tr>
<tr class="separator:aaa29d2acc2289b7ffdb84d72b50d2221"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cf1172e4bdf20983783e2fac05b4b83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a2cf1172e4bdf20983783e2fac05b4b83">Transfer</a> (<a class="el" href="classAudioSink.html#a60c1743d66e02b77f04791e72fa4cd0b">TransferIterator</a> &amp;start, const <a class="el" href="classAudioSink.html#a60c1743d66e02b77f04791e72fa4cd0b">TransferIterator</a> &amp;end) override</td></tr>
<tr class="memdesc:a2cf1172e4bdf20983783e2fac05b4b83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfers a range of sample bytes into the <a class="el" href="classAudioSink.html" title="Abstract class for audio output sinks. ">AudioSink</a>.  <a href="#a2cf1172e4bdf20983783e2fac05b4b83">More...</a><br /></td></tr>
<tr class="separator:a2cf1172e4bdf20983783e2fac05b4b83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab66b023fe5294a0cff568c629bdec1fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#ab66b023fe5294a0cff568c629bdec1fb">Callback</a> (std::uint8_t *out, int nbytes)</td></tr>
<tr class="memdesc:ab66b023fe5294a0cff568c629bdec1fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The callback proper.  <a href="#ab66b023fe5294a0cff568c629bdec1fb">More...</a><br /></td></tr>
<tr class="separator:ab66b023fe5294a0cff568c629bdec1fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classAudioSink"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classAudioSink')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classAudioSink.html">AudioSink</a></td></tr>
<tr class="memitem:a2a8c3927ae103a59672a7874abac899c inherit pub_methods_classAudioSink"><td class="memItemLeft" align="right" valign="top"><a id="a2a8c3927ae103a59672a7874abac899c"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSink.html#a2a8c3927ae103a59672a7874abac899c">~AudioSink</a> ()=default</td></tr>
<tr class="memdesc:a2a8c3927ae103a59672a7874abac899c inherit pub_methods_classAudioSink"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual, empty destructor for <a class="el" href="classAudioSink.html" title="Abstract class for audio output sinks. ">AudioSink</a>. <br /></td></tr>
<tr class="separator:a2a8c3927ae103a59672a7874abac899c inherit pub_methods_classAudioSink"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a14692929f2af692f18bb647611f15ec1"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; std::pair&lt; int, std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a14692929f2af692f18bb647611f15ec1">GetDevicesInfo</a> ()</td></tr>
<tr class="memdesc:a14692929f2af692f18bb647611f15ec1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the number and name of each output device entry in the AudioSystem.  <a href="#a14692929f2af692f18bb647611f15ec1">More...</a><br /></td></tr>
<tr class="separator:a14692929f2af692f18bb647611f15ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e60dbe9e711d2920677349c3357864d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a6e60dbe9e711d2920677349c3357864d">IsOutputDevice</a> (int id)</td></tr>
<tr class="memdesc:a6e60dbe9e711d2920677349c3357864d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can a sound device output sound?  <a href="#a6e60dbe9e711d2920677349c3357864d">More...</a><br /></td></tr>
<tr class="separator:a6e60dbe9e711d2920677349c3357864d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fada9de992049fa84462d347649ffc5"><td class="memItemLeft" align="right" valign="top"><a id="a4fada9de992049fa84462d347649ffc5"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a4fada9de992049fa84462d347649ffc5">InitLibrary</a> ()</td></tr>
<tr class="memdesc:a4fada9de992049fa84462d347649ffc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the <a class="el" href="classAudioSink.html" title="Abstract class for audio output sinks. ">AudioSink</a>'s libraries, if not initialised already. <br /></td></tr>
<tr class="separator:a4fada9de992049fa84462d347649ffc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf73a7bcb4cb24add154fe138557b655"><td class="memItemLeft" align="right" valign="top"><a id="adf73a7bcb4cb24add154fe138557b655"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#adf73a7bcb4cb24add154fe138557b655">CleanupLibrary</a> ()</td></tr>
<tr class="memdesc:adf73a7bcb4cb24add154fe138557b655"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans up the <a class="el" href="classAudioSink.html" title="Abstract class for audio output sinks. ">AudioSink</a>'s libraries, if not cleaned up already. <br /></td></tr>
<tr class="separator:adf73a7bcb4cb24add154fe138557b655"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a4cf90fbaa381b8435aff95c272a6f4ea"><td class="memItemLeft" align="right" valign="top"><a id="a4cf90fbaa381b8435aff95c272a6f4ea"></a>
SDL_AudioDeviceID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a4cf90fbaa381b8435aff95c272a6f4ea">device</a></td></tr>
<tr class="memdesc:a4cf90fbaa381b8435aff95c272a6f4ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">The SDL device to which we are outputting sound. <br /></td></tr>
<tr class="separator:a4cf90fbaa381b8435aff95c272a6f4ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af271b3e278e038ed1fe6def8599183ce"><td class="memItemLeft" align="right" valign="top"><a id="af271b3e278e038ed1fe6def8599183ce"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#af271b3e278e038ed1fe6def8599183ce">bytes_per_sample</a></td></tr>
<tr class="memdesc:af271b3e278e038ed1fe6def8599183ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bytes in one sample. <br /></td></tr>
<tr class="separator:af271b3e278e038ed1fe6def8599183ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9481620132ccdbfbe889145eaf77420f"><td class="memItemLeft" align="right" valign="top"><a id="a9481620132ccdbfbe889145eaf77420f"></a>
<a class="el" href="classRingBuffer.html">RingBuffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a9481620132ccdbfbe889145eaf77420f">ring_buf</a></td></tr>
<tr class="memdesc:a9481620132ccdbfbe889145eaf77420f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ring buffer used to transfer samples to the playing callback. <br /></td></tr>
<tr class="separator:a9481620132ccdbfbe889145eaf77420f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b2e346275370dad914e9b62043bbf5b"><td class="memItemLeft" align="right" valign="top"><a id="a6b2e346275370dad914e9b62043bbf5b"></a>
std::uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a6b2e346275370dad914e9b62043bbf5b">position_sample_count</a></td></tr>
<tr class="memdesc:a6b2e346275370dad914e9b62043bbf5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current position, in samples. <br /></td></tr>
<tr class="separator:a6b2e346275370dad914e9b62043bbf5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a779de6b2c66400371908cbfe93f46c"><td class="memItemLeft" align="right" valign="top"><a id="a5a779de6b2c66400371908cbfe93f46c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a5a779de6b2c66400371908cbfe93f46c">source_out</a></td></tr>
<tr class="memdesc:a5a779de6b2c66400371908cbfe93f46c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether the source has run out of things to feed the sink. <br /></td></tr>
<tr class="separator:a5a779de6b2c66400371908cbfe93f46c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2332785422efc8901586ca7de9f4613"><td class="memItemLeft" align="right" valign="top"><a id="ac2332785422efc8901586ca7de9f4613"></a>
<a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4">Audio::State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">state</a></td></tr>
<tr class="memdesc:ac2332785422efc8901586ca7de9f4613"><td class="mdescLeft">&#160;</td><td class="mdescRight">The decoder's current state. <br /></td></tr>
<tr class="separator:ac2332785422efc8901586ca7de9f4613"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a7dbb35d17143ae2560f53ac2182b016d"><td class="memItemLeft" align="right" valign="top">static const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a7dbb35d17143ae2560f53ac2182b016d">RINGBUF_POWER</a> = 16</td></tr>
<tr class="memdesc:a7dbb35d17143ae2560f53ac2182b016d"><td class="mdescLeft">&#160;</td><td class="mdescRight">n, where 2^n is the capacity of the <a class="el" href="classAudio.html" title="An audio item. ">Audio</a> ring buffer.  <a href="#a7dbb35d17143ae2560f53ac2182b016d">More...</a><br /></td></tr>
<tr class="separator:a7dbb35d17143ae2560f53ac2182b016d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16f7fafe3d4892c847cd41f782ae28d5"><td class="memItemLeft" align="right" valign="top">static const std::array&lt; SDL_AudioFormat, <a class="el" href="sample__formats_8hpp.html#a43d1a2237f0f45ed209b43391b0beb0b">SAMPLE_FORMAT_COUNT</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSdlAudioSink.html#a16f7fafe3d4892c847cd41f782ae28d5">FORMATS</a></td></tr>
<tr class="memdesc:a16f7fafe3d4892c847cd41f782ae28d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mapping from SampleFormats to their equivalent SDL_AudioFormats.  <a href="#a16f7fafe3d4892c847cd41f782ae28d5">More...</a><br /></td></tr>
<tr class="separator:a16f7fafe3d4892c847cd41f782ae28d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classAudioSink"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classAudioSink')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classAudioSink.html">AudioSink</a></td></tr>
<tr class="memitem:a60c1743d66e02b77f04791e72fa4cd0b inherit pub_types_classAudioSink"><td class="memItemLeft" align="right" valign="top"><a id="a60c1743d66e02b77f04791e72fa4cd0b"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSink.html#a60c1743d66e02b77f04791e72fa4cd0b">TransferIterator</a> = AudioSource::DecodeVector::iterator</td></tr>
<tr class="memdesc:a60c1743d66e02b77f04791e72fa4cd0b inherit pub_types_classAudioSink"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of iterators used in the <a class="el" href="classAudioSink.html#a93bd6b80d500ceafe4bb2165752f6ff2" title="Transfers a range of sample bytes into the AudioSink. ">Transfer()</a> method. <br /></td></tr>
<tr class="separator:a60c1743d66e02b77f04791e72fa4cd0b inherit pub_types_classAudioSink"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An output stream for audio, using SDL. </p>
<p>An <a class="el" href="classSdlAudioSink.html" title="An output stream for audio, using SDL. ">SdlAudioSink</a> consists of an SDL output device and a buffer that stores decoded samples from the <a class="el" href="classAudio.html" title="An audio item. ">Audio</a> object. While active, the <a class="el" href="classSdlAudioSink.html" title="An output stream for audio, using SDL. ">SdlAudioSink</a> periodically transfers samples from its buffer to SDL2 in a separate thread. </p>

<p>Definition at line <a class="el" href="audio__sink_8hpp_source.html#l00108">108</a> of file <a class="el" href="audio__sink_8hpp_source.html">audio_sink.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7d0cc5209c95298c6a0badd756367e32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d0cc5209c95298c6a0badd756367e32">&sect;&nbsp;</a></span>SdlAudioSink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SdlAudioSink::SdlAudioSink </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAudioSource.html">AudioSource</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>device_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs an <a class="el" href="classSdlAudioSink.html" title="An output stream for audio, using SDL. ">SdlAudioSink</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>The source from which this sink will receive audio. </td></tr>
    <tr><td class="paramname">device_id</td><td>The device ID to which this sink will output. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="audio__sink_8cpp_source.html#l00061">61</a> of file <a class="el" href="audio__sink_8cpp_source.html">audio_sink.cpp</a>.</p>

<p>References <a class="el" href="classAudioSource.html#af118b02c5aafb1bf64dbc0adec4aa7f7">AudioSource::ChannelCount()</a>, <a class="el" href="audio__sink_8hpp_source.html#l00168">FORMATS</a>, <a class="el" href="classAudioSource.html#a836c24d5237d2bb0754612f79c3d35a7">AudioSource::OutputSampleFormat()</a>, and <a class="el" href="classAudioSource.html#adac92b1a89a3bd14bf2ea402b71357eb">AudioSource::SampleRate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    : <a class="code" href="classSdlAudioSink.html#af271b3e278e038ed1fe6def8599183ce">bytes_per_sample</a>(source.<a class="code" href="classAudioSource.html#abdcd98d07926130f11ea935cbcb21375">BytesPerSample</a>()),</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <a class="code" href="classSdlAudioSink.html#a9481620132ccdbfbe889145eaf77420f">ring_buf</a>(<a class="code" href="classSdlAudioSink.html#a7dbb35d17143ae2560f53ac2182b016d">RINGBUF_POWER</a>, source.<a class="code" href="classAudioSource.html#abdcd98d07926130f11ea935cbcb21375">BytesPerSample</a>()),</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <a class="code" href="classSdlAudioSink.html#a6b2e346275370dad914e9b62043bbf5b">position_sample_count</a>(0),</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      <a class="code" href="classSdlAudioSink.html#a5a779de6b2c66400371908cbfe93f46c">source_out</a>(<span class="keyword">false</span>),</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      <a class="code" href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">state</a>(<a class="code" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a">Audio::State::STOPPED</a>)</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *name = SDL_GetAudioDeviceName(device_id, 0);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">if</span> (name == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classConfigError.html">ConfigError</a>(std::string(<span class="stringliteral">&quot;invalid device id: &quot;</span>) +</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                          std::to_string(device_id));</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    SDL_AudioSpec want;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    SDL_zero(want);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    want.freq = source.<a class="code" href="classAudioSource.html#adac92b1a89a3bd14bf2ea402b71357eb">SampleRate</a>();</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    want.format = <a class="code" href="classSdlAudioSink.html#a16f7fafe3d4892c847cd41f782ae28d5">FORMATS</a>[<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(source.<a class="code" href="classAudioSource.html#a836c24d5237d2bb0754612f79c3d35a7">OutputSampleFormat</a>())];</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    want.channels = source.<a class="code" href="classAudioSource.html#af118b02c5aafb1bf64dbc0adec4aa7f7">ChannelCount</a>();</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    want.callback = &amp;SDLCallback;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    want.userdata = (<span class="keywordtype">void</span> *)<span class="keyword">this</span>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    SDL_AudioSpec have;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    SDL_zero(have);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    this-&gt;<a class="code" href="classSdlAudioSink.html#a4cf90fbaa381b8435aff95c272a6f4ea">device</a> = SDL_OpenAudioDevice(name, 0, &amp;want, &amp;have, 0);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classSdlAudioSink.html#a4cf90fbaa381b8435aff95c272a6f4ea">device</a> == 0) {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classConfigError.html">ConfigError</a>(std::string(<span class="stringliteral">&quot;couldn&#39;t open device: &quot;</span>) +</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                          SDL_GetError());</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div><div class="ttc" id="classAudioSource_html_af118b02c5aafb1bf64dbc0adec4aa7f7"><div class="ttname"><a href="classAudioSource.html#af118b02c5aafb1bf64dbc0adec4aa7f7">AudioSource::ChannelCount</a></div><div class="ttdeci">virtual std::uint8_t ChannelCount() const =0</div><div class="ttdoc">Returns the channel count. </div></div>
<div class="ttc" id="classSdlAudioSink_html_a9481620132ccdbfbe889145eaf77420f"><div class="ttname"><a href="classSdlAudioSink.html#a9481620132ccdbfbe889145eaf77420f">SdlAudioSink::ring_buf</a></div><div class="ttdeci">RingBuffer ring_buf</div><div class="ttdoc">The ring buffer used to transfer samples to the playing callback. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00174">audio_sink.hpp:174</a></div></div>
<div class="ttc" id="classAudioSource_html_a836c24d5237d2bb0754612f79c3d35a7"><div class="ttname"><a href="classAudioSource.html#a836c24d5237d2bb0754612f79c3d35a7">AudioSource::OutputSampleFormat</a></div><div class="ttdeci">virtual SampleFormat OutputSampleFormat() const =0</div><div class="ttdoc">Returns the output sample format. </div></div>
<div class="ttc" id="classSdlAudioSink_html_a4cf90fbaa381b8435aff95c272a6f4ea"><div class="ttname"><a href="classSdlAudioSink.html#a4cf90fbaa381b8435aff95c272a6f4ea">SdlAudioSink::device</a></div><div class="ttdeci">SDL_AudioDeviceID device</div><div class="ttdoc">The SDL device to which we are outputting sound. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00161">audio_sink.hpp:161</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_a6b2e346275370dad914e9b62043bbf5b"><div class="ttname"><a href="classSdlAudioSink.html#a6b2e346275370dad914e9b62043bbf5b">SdlAudioSink::position_sample_count</a></div><div class="ttdeci">std::uint64_t position_sample_count</div><div class="ttdoc">The current position, in samples. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00177">audio_sink.hpp:177</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_a5a779de6b2c66400371908cbfe93f46c"><div class="ttname"><a href="classSdlAudioSink.html#a5a779de6b2c66400371908cbfe93f46c">SdlAudioSink::source_out</a></div><div class="ttdeci">bool source_out</div><div class="ttdoc">Whether the source has run out of things to feed the sink. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00180">audio_sink.hpp:180</a></div></div>
<div class="ttc" id="classAudioSource_html_abdcd98d07926130f11ea935cbcb21375"><div class="ttname"><a href="classAudioSource.html#abdcd98d07926130f11ea935cbcb21375">AudioSource::BytesPerSample</a></div><div class="ttdeci">virtual size_t BytesPerSample() const</div><div class="ttdoc">Returns the number of bytes for each sample this decoder outputs. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00020">audio_source.cpp:20</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_a16f7fafe3d4892c847cd41f782ae28d5"><div class="ttname"><a href="classSdlAudioSink.html#a16f7fafe3d4892c847cd41f782ae28d5">SdlAudioSink::FORMATS</a></div><div class="ttdeci">static const std::array&lt; SDL_AudioFormat, SAMPLE_FORMAT_COUNT &gt; FORMATS</div><div class="ttdoc">Mapping from SampleFormats to their equivalent SDL_AudioFormats. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00168">audio_sink.hpp:168</a></div></div>
<div class="ttc" id="classConfigError_html"><div class="ttname"><a href="classConfigError.html">ConfigError</a></div><div class="ttdoc">An Error signifying that playd has been improperly configured. </div><div class="ttdef"><b>Definition:</b> <a href="errors_8hpp_source.html#l00045">errors.hpp:45</a></div></div>
<div class="ttc" id="classAudioSource_html_adac92b1a89a3bd14bf2ea402b71357eb"><div class="ttname"><a href="classAudioSource.html#adac92b1a89a3bd14bf2ea402b71357eb">AudioSource::SampleRate</a></div><div class="ttdeci">virtual std::uint32_t SampleRate() const =0</div><div class="ttdoc">Returns the sample rate. </div></div>
<div class="ttc" id="classSdlAudioSink_html_ac2332785422efc8901586ca7de9f4613"><div class="ttname"><a href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">SdlAudioSink::state</a></div><div class="ttdeci">Audio::State state</div><div class="ttdoc">The decoder&amp;#39;s current state. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00183">audio_sink.hpp:183</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_af271b3e278e038ed1fe6def8599183ce"><div class="ttname"><a href="classSdlAudioSink.html#af271b3e278e038ed1fe6def8599183ce">SdlAudioSink::bytes_per_sample</a></div><div class="ttdeci">size_t bytes_per_sample</div><div class="ttdoc">Number of bytes in one sample. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00171">audio_sink.hpp:171</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_a7dbb35d17143ae2560f53ac2182b016d"><div class="ttname"><a href="classSdlAudioSink.html#a7dbb35d17143ae2560f53ac2182b016d">SdlAudioSink::RINGBUF_POWER</a></div><div class="ttdeci">static const size_t RINGBUF_POWER</div><div class="ttdoc">n, where 2^n is the capacity of the Audio ring buffer. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00165">audio_sink.hpp:165</a></div></div>
<div class="ttc" id="classAudio_html_ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a"><div class="ttname"><a href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a">Audio::State::STOPPED</a></div><div class="ttdoc">The Audio has been stopped, or not yet played. </div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab66b023fe5294a0cff568c629bdec1fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab66b023fe5294a0cff568c629bdec1fb">&sect;&nbsp;</a></span>Callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SdlAudioSink::Callback </td>
          <td>(</td>
          <td class="paramtype">std::uint8_t *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nbytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The callback proper. </p>
<p>This is executed in a separate thread by SDL once a stream is playing with the callback registered to it. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>The output buffer to which our samples should be written. </td></tr>
    <tr><td class="paramname">nbytes</td><td>The number of bytes SDL wants to read from <em>out</em>. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="audio__sink_8cpp_source.html#l00195">195</a> of file <a class="el" href="audio__sink_8cpp_source.html">audio_sink.cpp</a>.</p>

<p>References <a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50d0097c31cc7a56b9d12b19892ebcc2">Audio::AT_END</a>, <a class="el" href="audio__sink_8hpp_source.html#l00171">bytes_per_sample</a>, <a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50366a49630a416ab3ccaa004196027e">Audio::PLAYING</a>, <a class="el" href="audio__sink_8hpp_source.html#l00177">position_sample_count</a>, <a class="el" href="ringbuffer_8cpp_source.html#l00065">RingBuffer::Read()</a>, <a class="el" href="ringbuffer_8cpp_source.html#l00051">RingBuffer::ReadCapacity()</a>, <a class="el" href="audio__sink_8hpp_source.html#l00174">ring_buf</a>, <a class="el" href="audio__sink_8hpp_source.html#l00180">source_out</a>, and <a class="el" href="audio__sink_8hpp_source.html#l00183">state</a>.</p>
<div class="fragment"><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;{</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    assert(out != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    assert(0 &lt;= nbytes);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lnbytes = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(nbytes);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">// Make sure anything not filled up with sound later is set to silence.</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">// This is slightly inefficient (two writes to sound-filled regions</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// instead of one), but more elegant in failure cases.</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    memset(out, 0, lnbytes);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// If we&#39;re not supposed to be playing, don&#39;t play anything.</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">state</a> != <a class="code" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50366a49630a416ab3ccaa004196027e">Audio::State::PLAYING</a>) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">// Let&#39;s find out how many samples are available in total to give SDL.</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// Note: Since we run concurrently with the decoder, which is also</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// trying to modify the read capacity of the ringbuf (by adding</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">// things), this technically causes a race condition when we try to</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">// read `avail_samples` number of samples later.  Not to fear: the</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// actual read capacity can only be greater than or equal to</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// `avail_samples`, as this is the only place where we can *decrease*</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// it.</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keyword">auto</span> avail_samples = this-&gt;<a class="code" href="classSdlAudioSink.html#a9481620132ccdbfbe889145eaf77420f">ring_buf</a>.<a class="code" href="classRingBuffer.html#a256c0ed07e70d0a20922c8e560558256">ReadCapacity</a>();</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// Have we run out of things to feed?</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> (avail_samples == 0) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="comment">// Is this a temporary condition, or have we genuinely played</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">// out all we can?  If the latter, we&#39;re now out too.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classSdlAudioSink.html#a5a779de6b2c66400371908cbfe93f46c">source_out</a>) this-&gt;<a class="code" href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">state</a> = <a class="code" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50d0097c31cc7a56b9d12b19892ebcc2">Audio::State::AT_END</a>;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="comment">// Don&#39;t even bother reading from the ring buffer.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">// How many samples do we want to pull out of the ring buffer?</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordtype">size_t</span> req_samples = lnbytes / this-&gt;<a class="code" href="classSdlAudioSink.html#af271b3e278e038ed1fe6def8599183ce">bytes_per_sample</a>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">// How many can we pull out?  Send this amount to SDL.</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keyword">auto</span> samples = std::min(req_samples, avail_samples);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keyword">auto</span> read_samples =</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            this-&gt;<a class="code" href="classSdlAudioSink.html#a9481620132ccdbfbe889145eaf77420f">ring_buf</a>.<a class="code" href="classRingBuffer.html#a00dd46d66bef019d57a1d72e76ea9101">Read</a>(reinterpret_cast&lt;char *&gt;(out), samples);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    this-&gt;<a class="code" href="classSdlAudioSink.html#a6b2e346275370dad914e9b62043bbf5b">position_sample_count</a> += read_samples;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div><div class="ttc" id="classAudio_html_ae88e9fd82aea448f55f5e2d3062c77e4a50366a49630a416ab3ccaa004196027e"><div class="ttname"><a href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50366a49630a416ab3ccaa004196027e">Audio::State::PLAYING</a></div><div class="ttdoc">The Audio is currently playing. </div></div>
<div class="ttc" id="classAudio_html_ae88e9fd82aea448f55f5e2d3062c77e4a50d0097c31cc7a56b9d12b19892ebcc2"><div class="ttname"><a href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50d0097c31cc7a56b9d12b19892ebcc2">Audio::State::AT_END</a></div><div class="ttdoc">The Audio has ended and can&amp;#39;t play without a seek. </div></div>
<div class="ttc" id="classSdlAudioSink_html_a9481620132ccdbfbe889145eaf77420f"><div class="ttname"><a href="classSdlAudioSink.html#a9481620132ccdbfbe889145eaf77420f">SdlAudioSink::ring_buf</a></div><div class="ttdeci">RingBuffer ring_buf</div><div class="ttdoc">The ring buffer used to transfer samples to the playing callback. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00174">audio_sink.hpp:174</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_a6b2e346275370dad914e9b62043bbf5b"><div class="ttname"><a href="classSdlAudioSink.html#a6b2e346275370dad914e9b62043bbf5b">SdlAudioSink::position_sample_count</a></div><div class="ttdeci">std::uint64_t position_sample_count</div><div class="ttdoc">The current position, in samples. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00177">audio_sink.hpp:177</a></div></div>
<div class="ttc" id="classRingBuffer_html_a00dd46d66bef019d57a1d72e76ea9101"><div class="ttname"><a href="classRingBuffer.html#a00dd46d66bef019d57a1d72e76ea9101">RingBuffer::Read</a></div><div class="ttdeci">unsigned long Read(char *start, unsigned long count)</div><div class="ttdoc">Reads samples from the ring buffer into an array. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8cpp_source.html#l00065">ringbuffer.cpp:65</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_a5a779de6b2c66400371908cbfe93f46c"><div class="ttname"><a href="classSdlAudioSink.html#a5a779de6b2c66400371908cbfe93f46c">SdlAudioSink::source_out</a></div><div class="ttdeci">bool source_out</div><div class="ttdoc">Whether the source has run out of things to feed the sink. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00180">audio_sink.hpp:180</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_ac2332785422efc8901586ca7de9f4613"><div class="ttname"><a href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">SdlAudioSink::state</a></div><div class="ttdeci">Audio::State state</div><div class="ttdoc">The decoder&amp;#39;s current state. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00183">audio_sink.hpp:183</a></div></div>
<div class="ttc" id="classRingBuffer_html_a256c0ed07e70d0a20922c8e560558256"><div class="ttname"><a href="classRingBuffer.html#a256c0ed07e70d0a20922c8e560558256">RingBuffer::ReadCapacity</a></div><div class="ttdeci">size_t ReadCapacity() const</div><div class="ttdoc">The current read capacity. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8cpp_source.html#l00051">ringbuffer.cpp:51</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_af271b3e278e038ed1fe6def8599183ce"><div class="ttname"><a href="classSdlAudioSink.html#af271b3e278e038ed1fe6def8599183ce">SdlAudioSink::bytes_per_sample</a></div><div class="ttdeci">size_t bytes_per_sample</div><div class="ttdoc">Number of bytes in one sample. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00171">audio_sink.hpp:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a14692929f2af692f18bb647611f15ec1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14692929f2af692f18bb647611f15ec1">&sect;&nbsp;</a></span>GetDevicesInfo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::pair&lt; int, std::string &gt; &gt; SdlAudioSink::GetDevicesInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the number and name of each output device entry in the AudioSystem. </p>
<dl class="section return"><dt>Returns</dt><dd>List of output devices, as strings. </dd></dl>

<p>Definition at line <a class="el" href="audio__sink_8cpp_source.html#l00241">241</a> of file <a class="el" href="audio__sink_8cpp_source.html">audio_sink.cpp</a>.</p>

<p>Referenced by <a class="el" href="main_8cpp_source.html#l00088">ExitWithUsage()</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    std::vector&lt;std::pair&lt;int, std::string&gt;&gt; list;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// The 0 in SDL_GetNumAudioDevices tells SDL we want playback devices.</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordtype">int</span> is = SDL_GetNumAudioDevices(0);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; is; i++) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *n = SDL_GetAudioDeviceName(i, 0);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">if</span> (n != <span class="keyword">nullptr</span>) list.emplace_back(i, std::string(n));</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> list;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a6e60dbe9e711d2920677349c3357864d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e60dbe9e711d2920677349c3357864d">&sect;&nbsp;</a></span>IsOutputDevice()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SdlAudioSink::IsOutputDevice </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Can a sound device output sound? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Device ID. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the device can handle outputting sound. </dd></dl>

<p>Definition at line <a class="el" href="audio__sink_8cpp_source.html#l00255">255</a> of file <a class="el" href="audio__sink_8cpp_source.html">audio_sink.cpp</a>.</p>

<p>Referenced by <a class="el" href="main_8cpp_source.html#l00064">GetDeviceID()</a>.</p>
<div class="fragment"><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;{</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">int</span> ids = SDL_GetNumAudioDevices(0);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">// See comment in GetDevicesInfo for why this is sufficient.</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">return</span> (0 &lt;= <span class="keywordtype">id</span> &amp;&amp; <span class="keywordtype">id</span> &lt; ids);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a222f3a89cdbccb1853c706e80314a5ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a222f3a89cdbccb1853c706e80314a5ca">&sect;&nbsp;</a></span>Position()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::uint64_t SdlAudioSink::Position </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the current played position in the song, in samples. </p>
<p>As this may be executing whilst the playing callback is running, do not expect it to be highly accurate. </p><dl class="section return"><dt>Returns</dt><dd>The current position, as a count of elapsed samples. </dd></dl>

<p>Implements <a class="el" href="classAudioSink.html#aa6252e09d7fdf4984d794674a17480cc">AudioSink</a>.</p>

<p>Definition at line <a class="el" href="audio__sink_8cpp_source.html#l00143">143</a> of file <a class="el" href="audio__sink_8cpp_source.html">audio_sink.cpp</a>.</p>

<p>References <a class="el" href="audio__sink_8hpp_source.html#l00177">position_sample_count</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> this-&gt;<a class="code" href="classSdlAudioSink.html#a6b2e346275370dad914e9b62043bbf5b">position_sample_count</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div><div class="ttc" id="classSdlAudioSink_html_a6b2e346275370dad914e9b62043bbf5b"><div class="ttname"><a href="classSdlAudioSink.html#a6b2e346275370dad914e9b62043bbf5b">SdlAudioSink::position_sample_count</a></div><div class="ttdeci">std::uint64_t position_sample_count</div><div class="ttdoc">The current position, in samples. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00177">audio_sink.hpp:177</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a48ff24e2977ac9ac73c79e94732acb85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48ff24e2977ac9ac73c79e94732acb85">&sect;&nbsp;</a></span>SetPosition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SdlAudioSink::SetPosition </td>
          <td>(</td>
          <td class="paramtype">std::uint64_t&#160;</td>
          <td class="paramname"><em>samples</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the current played position, given a position in samples. </p>
<p>This flushes out the <a class="el" href="classAudioSink.html" title="Abstract class for audio output sinks. ">AudioSink</a> ready to receive sample data from the new position. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">samples</td><td>The new position, as a count of elapsed samples. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classSdlAudioSink.html#a222f3a89cdbccb1853c706e80314a5ca" title="Gets the current played position in the song, in samples. ">Position</a> </dd></dl>

<p>Implements <a class="el" href="classAudioSink.html#aa7a46170d59705933ac70815ffcce65c">AudioSink</a>.</p>

<p>Definition at line <a class="el" href="audio__sink_8cpp_source.html#l00148">148</a> of file <a class="el" href="audio__sink_8cpp_source.html">audio_sink.cpp</a>.</p>

<p>References <a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50d0097c31cc7a56b9d12b19892ebcc2">Audio::AT_END</a>, <a class="el" href="ringbuffer_8cpp_source.html#l00074">RingBuffer::Flush()</a>, <a class="el" href="audio__sink_8hpp_source.html#l00177">position_sample_count</a>, <a class="el" href="audio__sink_8hpp_source.html#l00174">ring_buf</a>, <a class="el" href="audio__sink_8hpp_source.html#l00180">source_out</a>, <a class="el" href="audio__sink_8hpp_source.html#l00183">state</a>, <a class="el" href="audio__sink_8cpp_source.html#l00122">Stop()</a>, and <a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a">Audio::STOPPED</a>.</p>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    this-&gt;<a class="code" href="classSdlAudioSink.html#a6b2e346275370dad914e9b62043bbf5b">position_sample_count</a> = samples;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// We might have been at the end of the file previously.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// If so, we might not be now, so clear the out flags.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    this-&gt;<a class="code" href="classSdlAudioSink.html#a5a779de6b2c66400371908cbfe93f46c">source_out</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">state</a> == <a class="code" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50d0097c31cc7a56b9d12b19892ebcc2">Audio::State::AT_END</a>) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        this-&gt;<a class="code" href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">state</a> = <a class="code" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a">Audio::State::STOPPED</a>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        this-&gt;<a class="code" href="classSdlAudioSink.html#a046e55bf5bb91461179d3e9d3f7d510a">Stop</a>();</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// The ringbuf will have been full of samples from the old</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// position, so we need to get rid of them.</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    this-&gt;<a class="code" href="classSdlAudioSink.html#a9481620132ccdbfbe889145eaf77420f">ring_buf</a>.<a class="code" href="classRingBuffer.html#a66d87ffb1eb3ea864cb2ecc6dd09e507">Flush</a>();</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div><div class="ttc" id="classAudio_html_ae88e9fd82aea448f55f5e2d3062c77e4a50d0097c31cc7a56b9d12b19892ebcc2"><div class="ttname"><a href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50d0097c31cc7a56b9d12b19892ebcc2">Audio::State::AT_END</a></div><div class="ttdoc">The Audio has ended and can&amp;#39;t play without a seek. </div></div>
<div class="ttc" id="classSdlAudioSink_html_a9481620132ccdbfbe889145eaf77420f"><div class="ttname"><a href="classSdlAudioSink.html#a9481620132ccdbfbe889145eaf77420f">SdlAudioSink::ring_buf</a></div><div class="ttdeci">RingBuffer ring_buf</div><div class="ttdoc">The ring buffer used to transfer samples to the playing callback. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00174">audio_sink.hpp:174</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_a046e55bf5bb91461179d3e9d3f7d510a"><div class="ttname"><a href="classSdlAudioSink.html#a046e55bf5bb91461179d3e9d3f7d510a">SdlAudioSink::Stop</a></div><div class="ttdeci">void Stop() override</div><div class="ttdoc">Stops the audio stream. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8cpp_source.html#l00122">audio_sink.cpp:122</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_a6b2e346275370dad914e9b62043bbf5b"><div class="ttname"><a href="classSdlAudioSink.html#a6b2e346275370dad914e9b62043bbf5b">SdlAudioSink::position_sample_count</a></div><div class="ttdeci">std::uint64_t position_sample_count</div><div class="ttdoc">The current position, in samples. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00177">audio_sink.hpp:177</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_a5a779de6b2c66400371908cbfe93f46c"><div class="ttname"><a href="classSdlAudioSink.html#a5a779de6b2c66400371908cbfe93f46c">SdlAudioSink::source_out</a></div><div class="ttdeci">bool source_out</div><div class="ttdoc">Whether the source has run out of things to feed the sink. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00180">audio_sink.hpp:180</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_ac2332785422efc8901586ca7de9f4613"><div class="ttname"><a href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">SdlAudioSink::state</a></div><div class="ttdeci">Audio::State state</div><div class="ttdoc">The decoder&amp;#39;s current state. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00183">audio_sink.hpp:183</a></div></div>
<div class="ttc" id="classRingBuffer_html_a66d87ffb1eb3ea864cb2ecc6dd09e507"><div class="ttname"><a href="classRingBuffer.html#a66d87ffb1eb3ea864cb2ecc6dd09e507">RingBuffer::Flush</a></div><div class="ttdeci">void Flush()</div><div class="ttdoc">Empties the ring buffer. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8cpp_source.html#l00074">ringbuffer.cpp:74</a></div></div>
<div class="ttc" id="classAudio_html_ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a"><div class="ttname"><a href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a">Audio::State::STOPPED</a></div><div class="ttdoc">The Audio has been stopped, or not yet played. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa29d2acc2289b7ffdb84d72b50d2221"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa29d2acc2289b7ffdb84d72b50d2221">&sect;&nbsp;</a></span>SourceOut()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SdlAudioSink::SourceOut </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tells this <a class="el" href="classAudioSink.html" title="Abstract class for audio output sinks. ">AudioSink</a> that the source has run out. </p>
<p>When this occurs, the next time the ringbuf goes empty, the sink has also run out and should stop. </p>

<p>Implements <a class="el" href="classAudioSink.html#a385f365594f709bdff28514056e2d83f">AudioSink</a>.</p>

<p>Definition at line <a class="el" href="audio__sink_8cpp_source.html#l00135">135</a> of file <a class="el" href="audio__sink_8cpp_source.html">audio_sink.cpp</a>.</p>

<p>References <a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50d0097c31cc7a56b9d12b19892ebcc2">Audio::AT_END</a>, <a class="el" href="audio__sink_8hpp_source.html#l00180">source_out</a>, and <a class="el" href="audio__sink_8hpp_source.html#l00183">state</a>.</p>
<div class="fragment"><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// The sink should only be out if the source is.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    assert(this-&gt;<a class="code" href="classSdlAudioSink.html#a5a779de6b2c66400371908cbfe93f46c">source_out</a> || this-&gt;<a class="code" href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">state</a> != <a class="code" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50d0097c31cc7a56b9d12b19892ebcc2">Audio::State::AT_END</a>);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    this-&gt;<a class="code" href="classSdlAudioSink.html#a5a779de6b2c66400371908cbfe93f46c">source_out</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div><div class="ttc" id="classAudio_html_ae88e9fd82aea448f55f5e2d3062c77e4a50d0097c31cc7a56b9d12b19892ebcc2"><div class="ttname"><a href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50d0097c31cc7a56b9d12b19892ebcc2">Audio::State::AT_END</a></div><div class="ttdoc">The Audio has ended and can&amp;#39;t play without a seek. </div></div>
<div class="ttc" id="classSdlAudioSink_html_a5a779de6b2c66400371908cbfe93f46c"><div class="ttname"><a href="classSdlAudioSink.html#a5a779de6b2c66400371908cbfe93f46c">SdlAudioSink::source_out</a></div><div class="ttdeci">bool source_out</div><div class="ttdoc">Whether the source has run out of things to feed the sink. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00180">audio_sink.hpp:180</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_ac2332785422efc8901586ca7de9f4613"><div class="ttname"><a href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">SdlAudioSink::state</a></div><div class="ttdeci">Audio::State state</div><div class="ttdoc">The decoder&amp;#39;s current state. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00183">audio_sink.hpp:183</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae825ec1b65e671a013cb06710d32e5c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae825ec1b65e671a013cb06710d32e5c9">&sect;&nbsp;</a></span>Start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SdlAudioSink::Start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starts the audio stream. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classSdlAudioSink.html#a046e55bf5bb91461179d3e9d3f7d510a" title="Stops the audio stream. ">Stop</a> </dd>
<dd>
IsHalted </dd></dl>

<p>Implements <a class="el" href="classAudioSink.html#a9fcc5e2de1abe97cc5ff7d4d45579853">AudioSink</a>.</p>

<p>Definition at line <a class="el" href="audio__sink_8cpp_source.html#l00114">114</a> of file <a class="el" href="audio__sink_8cpp_source.html">audio_sink.cpp</a>.</p>

<p>References <a class="el" href="audio__sink_8hpp_source.html#l00161">device</a>, <a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50366a49630a416ab3ccaa004196027e">Audio::PLAYING</a>, <a class="el" href="audio__sink_8hpp_source.html#l00183">state</a>, and <a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a">Audio::STOPPED</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">state</a> != <a class="code" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a">Audio::State::STOPPED</a>) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    SDL_PauseAudioDevice(this-&gt;<a class="code" href="classSdlAudioSink.html#a4cf90fbaa381b8435aff95c272a6f4ea">device</a>, 0);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    this-&gt;<a class="code" href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">state</a> = <a class="code" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50366a49630a416ab3ccaa004196027e">Audio::State::PLAYING</a>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div><div class="ttc" id="classAudio_html_ae88e9fd82aea448f55f5e2d3062c77e4a50366a49630a416ab3ccaa004196027e"><div class="ttname"><a href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a50366a49630a416ab3ccaa004196027e">Audio::State::PLAYING</a></div><div class="ttdoc">The Audio is currently playing. </div></div>
<div class="ttc" id="classSdlAudioSink_html_a4cf90fbaa381b8435aff95c272a6f4ea"><div class="ttname"><a href="classSdlAudioSink.html#a4cf90fbaa381b8435aff95c272a6f4ea">SdlAudioSink::device</a></div><div class="ttdeci">SDL_AudioDeviceID device</div><div class="ttdoc">The SDL device to which we are outputting sound. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00161">audio_sink.hpp:161</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_ac2332785422efc8901586ca7de9f4613"><div class="ttname"><a href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">SdlAudioSink::state</a></div><div class="ttdeci">Audio::State state</div><div class="ttdoc">The decoder&amp;#39;s current state. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00183">audio_sink.hpp:183</a></div></div>
<div class="ttc" id="classAudio_html_ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a"><div class="ttname"><a href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a">Audio::State::STOPPED</a></div><div class="ttdoc">The Audio has been stopped, or not yet played. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a80a7f1983b286f2bfd31e9bca4275df7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80a7f1983b286f2bfd31e9bca4275df7">&sect;&nbsp;</a></span>State()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4">Audio::State</a> SdlAudioSink::State </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets this <a class="el" href="classAudioSink.html" title="Abstract class for audio output sinks. ">AudioSink</a>'s current state (playing/stopped/at end). </p>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4" title="Enumeration of possible states for this Audio. ">Audio::State</a> representing this <a class="el" href="classAudioSink.html" title="Abstract class for audio output sinks. ">AudioSink</a>'s state. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4" title="Enumeration of possible states for this Audio. ">Audio::State</a> </dd></dl>

<p>Reimplemented from <a class="el" href="classAudioSink.html#a768f2e9f28e9a63a0dec8b39ff7bf4fd">AudioSink</a>.</p>

<p>Definition at line <a class="el" href="audio__sink_8cpp_source.html#l00130">130</a> of file <a class="el" href="audio__sink_8cpp_source.html">audio_sink.cpp</a>.</p>

<p>References <a class="el" href="audio__sink_8hpp_source.html#l00183">state</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> this-&gt;<a class="code" href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">state</a>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div><div class="ttc" id="classSdlAudioSink_html_ac2332785422efc8901586ca7de9f4613"><div class="ttname"><a href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">SdlAudioSink::state</a></div><div class="ttdeci">Audio::State state</div><div class="ttdoc">The decoder&amp;#39;s current state. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00183">audio_sink.hpp:183</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a046e55bf5bb91461179d3e9d3f7d510a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a046e55bf5bb91461179d3e9d3f7d510a">&sect;&nbsp;</a></span>Stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SdlAudioSink::Stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stops the audio stream. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classSdlAudioSink.html#ae825ec1b65e671a013cb06710d32e5c9" title="Starts the audio stream. ">Start</a> </dd>
<dd>
IsHalted </dd></dl>

<p>Implements <a class="el" href="classAudioSink.html#a59793f3ae2cbd0fe2834f4f3c4a8f8c3">AudioSink</a>.</p>

<p>Definition at line <a class="el" href="audio__sink_8cpp_source.html#l00122">122</a> of file <a class="el" href="audio__sink_8cpp_source.html">audio_sink.cpp</a>.</p>

<p>References <a class="el" href="audio__sink_8hpp_source.html#l00161">device</a>, <a class="el" href="audio__sink_8hpp_source.html#l00183">state</a>, and <a class="el" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a">Audio::STOPPED</a>.</p>

<p>Referenced by <a class="el" href="audio__sink_8cpp_source.html#l00148">SetPosition()</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">state</a> == <a class="code" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a">Audio::State::STOPPED</a>) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    SDL_PauseAudioDevice(this-&gt;<a class="code" href="classSdlAudioSink.html#a4cf90fbaa381b8435aff95c272a6f4ea">device</a>, 1);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    this-&gt;<a class="code" href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">state</a> = <a class="code" href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a">Audio::State::STOPPED</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div><div class="ttc" id="classSdlAudioSink_html_a4cf90fbaa381b8435aff95c272a6f4ea"><div class="ttname"><a href="classSdlAudioSink.html#a4cf90fbaa381b8435aff95c272a6f4ea">SdlAudioSink::device</a></div><div class="ttdeci">SDL_AudioDeviceID device</div><div class="ttdoc">The SDL device to which we are outputting sound. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00161">audio_sink.hpp:161</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_ac2332785422efc8901586ca7de9f4613"><div class="ttname"><a href="classSdlAudioSink.html#ac2332785422efc8901586ca7de9f4613">SdlAudioSink::state</a></div><div class="ttdeci">Audio::State state</div><div class="ttdoc">The decoder&amp;#39;s current state. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00183">audio_sink.hpp:183</a></div></div>
<div class="ttc" id="classAudio_html_ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a"><div class="ttname"><a href="classAudio.html#ae88e9fd82aea448f55f5e2d3062c77e4a09d4d696b4e935115b9313e3c412509a">Audio::State::STOPPED</a></div><div class="ttdoc">The Audio has been stopped, or not yet played. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2cf1172e4bdf20983783e2fac05b4b83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cf1172e4bdf20983783e2fac05b4b83">&sect;&nbsp;</a></span>Transfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SdlAudioSink::Transfer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classAudioSink.html#a60c1743d66e02b77f04791e72fa4cd0b">TransferIterator</a> &amp;&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classAudioSink.html#a60c1743d66e02b77f04791e72fa4cd0b">TransferIterator</a> &amp;&#160;</td>
          <td class="paramname"><em>end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transfers a range of sample bytes into the <a class="el" href="classAudioSink.html" title="Abstract class for audio output sinks. ">AudioSink</a>. </p>
<p>The range may be empty, but must be valid.</p>
<ul>
<li>Precondition: <em>start</em> &lt;= <em>end</em>, <em>start</em> and <em>end</em> point to a valid contiguous block of sample bytes.</li>
<li>Postcondition: <em>start</em> &lt;= <em>end</em>, <em>old(start)</em> &lt;= <em>start</em>, <em>*start</em> and <em>end</em> point to a valid contiguous block of sample bytes.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>An iterator denoting the start of the range. This iterator will be advanced by the number of bytes accepted. </td></tr>
    <tr><td class="paramname">end</td><td>An iterator denoting the end of the range. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classAudioSink.html#a93bd6b80d500ceafe4bb2165752f6ff2">AudioSink</a>.</p>

<p>Definition at line <a class="el" href="audio__sink_8cpp_source.html#l00165">165</a> of file <a class="el" href="audio__sink_8cpp_source.html">audio_sink.cpp</a>.</p>

<p>References <a class="el" href="audio__sink_8hpp_source.html#l00171">bytes_per_sample</a>, <a class="el" href="audio__sink_8hpp_source.html#l00174">ring_buf</a>, <a class="el" href="ringbuffer_8cpp_source.html#l00056">RingBuffer::Write()</a>, and <a class="el" href="ringbuffer_8cpp_source.html#l00046">RingBuffer::WriteCapacity()</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    assert(start &lt;= end);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// No point transferring 0 bytes.</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span> (start == end) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bytes = std::distance(start, end);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// There should be a whole number of samples being transferred.</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    assert(bytes % <a class="code" href="classSdlAudioSink.html#af271b3e278e038ed1fe6def8599183ce">bytes_per_sample</a> == 0);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    assert(0 &lt; bytes);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordtype">size_t</span> samples = bytes / this-&gt;<a class="code" href="classSdlAudioSink.html#af271b3e278e038ed1fe6def8599183ce">bytes_per_sample</a>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// Only transfer as many samples as the ring buffer can take.</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// Don&#39;t bother trying to write 0 samples!</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keyword">auto</span> count = std::min(samples, this-&gt;<a class="code" href="classSdlAudioSink.html#a9481620132ccdbfbe889145eaf77420f">ring_buf</a>.<a class="code" href="classRingBuffer.html#a2cfead01f01634798600b16978ad7514">WriteCapacity</a>());</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> (count == 0) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keyword">auto</span> start_ptr = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(&amp;*start);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> written_count = this-&gt;<a class="code" href="classSdlAudioSink.html#a9481620132ccdbfbe889145eaf77420f">ring_buf</a>.<a class="code" href="classRingBuffer.html#a884865494c298d2842580eed0b8ddb36">Write</a>(start_ptr, count);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// Since we never write more than the ring buffer can take, the written</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// count should equal the requested written count.</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    assert(written_count == count);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    start += (written_count * this-&gt;<a class="code" href="classSdlAudioSink.html#af271b3e278e038ed1fe6def8599183ce">bytes_per_sample</a>);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    assert(start &lt;= end);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div><div class="ttc" id="classSdlAudioSink_html_a9481620132ccdbfbe889145eaf77420f"><div class="ttname"><a href="classSdlAudioSink.html#a9481620132ccdbfbe889145eaf77420f">SdlAudioSink::ring_buf</a></div><div class="ttdeci">RingBuffer ring_buf</div><div class="ttdoc">The ring buffer used to transfer samples to the playing callback. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00174">audio_sink.hpp:174</a></div></div>
<div class="ttc" id="classRingBuffer_html_a2cfead01f01634798600b16978ad7514"><div class="ttname"><a href="classRingBuffer.html#a2cfead01f01634798600b16978ad7514">RingBuffer::WriteCapacity</a></div><div class="ttdeci">size_t WriteCapacity() const</div><div class="ttdoc">The current write capacity. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8cpp_source.html#l00046">ringbuffer.cpp:46</a></div></div>
<div class="ttc" id="classRingBuffer_html_a884865494c298d2842580eed0b8ddb36"><div class="ttname"><a href="classRingBuffer.html#a884865494c298d2842580eed0b8ddb36">RingBuffer::Write</a></div><div class="ttdeci">unsigned long Write(const char *start, unsigned long count)</div><div class="ttdoc">Writes samples from an array into the ring buffer. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8cpp_source.html#l00056">ringbuffer.cpp:56</a></div></div>
<div class="ttc" id="classSdlAudioSink_html_af271b3e278e038ed1fe6def8599183ce"><div class="ttname"><a href="classSdlAudioSink.html#af271b3e278e038ed1fe6def8599183ce">SdlAudioSink::bytes_per_sample</a></div><div class="ttdeci">size_t bytes_per_sample</div><div class="ttdoc">Number of bytes in one sample. </div><div class="ttdef"><b>Definition:</b> <a href="audio__sink_8hpp_source.html#l00171">audio_sink.hpp:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a16f7fafe3d4892c847cd41f782ae28d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16f7fafe3d4892c847cd41f782ae28d5">&sect;&nbsp;</a></span>FORMATS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::array&lt; SDL_AudioFormat, <a class="el" href="sample__formats_8hpp.html#a43d1a2237f0f45ed209b43391b0beb0b">SAMPLE_FORMAT_COUNT</a> &gt; SdlAudioSink::FORMATS</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{{</div><div class="line">    AUDIO_U8,  </div><div class="line">    AUDIO_S8,  </div><div class="line">    AUDIO_S16, </div><div class="line">    AUDIO_S32, </div><div class="line">    AUDIO_F32  </div><div class="line">}}</div></div><!-- fragment -->
<p>Mapping from SampleFormats to their equivalent SDL_AudioFormats. </p>

<p>Definition at line <a class="el" href="audio__sink_8hpp_source.html#l00168">168</a> of file <a class="el" href="audio__sink_8hpp_source.html">audio_sink.hpp</a>.</p>

<p>Referenced by <a class="el" href="audio__sink_8cpp_source.html#l00061">SdlAudioSink()</a>, and <a class="el" href="audio__sink_8cpp_source.html#l00031">AudioSink::State()</a>.</p>

</div>
</div>
<a id="a7dbb35d17143ae2560f53ac2182b016d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dbb35d17143ae2560f53ac2182b016d">&sect;&nbsp;</a></span>RINGBUF_POWER</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t SdlAudioSink::RINGBUF_POWER = 16</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>n, where 2^n is the capacity of the <a class="el" href="classAudio.html" title="An audio item. ">Audio</a> ring buffer. </p>
<dl class="section see"><dt>See also</dt><dd>RINGBUF_SIZE </dd></dl>

<p>Definition at line <a class="el" href="audio__sink_8hpp_source.html#l00165">165</a> of file <a class="el" href="audio__sink_8hpp_source.html">audio_sink.hpp</a>.</p>

<p>Referenced by <a class="el" href="audio__sink_8cpp_source.html#l00031">AudioSink::State()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/audio/<a class="el" href="audio__sink_8hpp_source.html">audio_sink.hpp</a></li>
<li>src/audio/<a class="el" href="audio__sink_8cpp_source.html">audio_sink.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classSdlAudioSink.html">SdlAudioSink</a></li>
    <li class="footer">Generated on Mon Sep 12 2016 21:01:24 for URY playd by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
