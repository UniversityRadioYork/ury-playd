<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>URY playd: RingBuffer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">URY playd
   </div>
   <div id="projectbrief">C++ minimalist audio player</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classRingBuffer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classRingBuffer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">RingBuffer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A ring buffer.  
 <a href="classRingBuffer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ringbuffer_8hpp_source.html">ringbuffer.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af0150c275335e1f24ee6342f1e52db0f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRingBuffer.html#af0150c275335e1f24ee6342f1e52db0f">RingBuffer</a> (int power, int size)</td></tr>
<tr class="memdesc:af0150c275335e1f24ee6342f1e52db0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="classRingBuffer.html" title="A ring buffer. ">RingBuffer</a>.  <a href="#af0150c275335e1f24ee6342f1e52db0f">More...</a><br /></td></tr>
<tr class="separator:af0150c275335e1f24ee6342f1e52db0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2715b2e99ea24521ef7a586c2f33e1c9"><td class="memItemLeft" align="right" valign="top"><a id="a2715b2e99ea24521ef7a586c2f33e1c9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRingBuffer.html#a2715b2e99ea24521ef7a586c2f33e1c9">~RingBuffer</a> ()</td></tr>
<tr class="memdesc:a2715b2e99ea24521ef7a586c2f33e1c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructs a PaRingBuffer. <br /></td></tr>
<tr class="separator:a2715b2e99ea24521ef7a586c2f33e1c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ac7985eb168a6f65e3fabfc6f31580c"><td class="memItemLeft" align="right" valign="top"><a id="a0ac7985eb168a6f65e3fabfc6f31580c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRingBuffer.html#a0ac7985eb168a6f65e3fabfc6f31580c">RingBuffer</a> (const <a class="el" href="classRingBuffer.html">RingBuffer</a> &amp;)=delete</td></tr>
<tr class="memdesc:a0ac7985eb168a6f65e3fabfc6f31580c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted copy constructor. <br /></td></tr>
<tr class="separator:a0ac7985eb168a6f65e3fabfc6f31580c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeef1b822b06f55101cfd805de75bbe40"><td class="memItemLeft" align="right" valign="top"><a id="aeef1b822b06f55101cfd805de75bbe40"></a>
<a class="el" href="classRingBuffer.html">RingBuffer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRingBuffer.html#aeef1b822b06f55101cfd805de75bbe40">operator=</a> (const <a class="el" href="classRingBuffer.html">RingBuffer</a> &amp;)=delete</td></tr>
<tr class="memdesc:aeef1b822b06f55101cfd805de75bbe40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted copy-assignment. <br /></td></tr>
<tr class="separator:aeef1b822b06f55101cfd805de75bbe40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cfead01f01634798600b16978ad7514"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRingBuffer.html#a2cfead01f01634798600b16978ad7514">WriteCapacity</a> () const</td></tr>
<tr class="memdesc:a2cfead01f01634798600b16978ad7514"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current write capacity.  <a href="#a2cfead01f01634798600b16978ad7514">More...</a><br /></td></tr>
<tr class="separator:a2cfead01f01634798600b16978ad7514"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256c0ed07e70d0a20922c8e560558256"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRingBuffer.html#a256c0ed07e70d0a20922c8e560558256">ReadCapacity</a> () const</td></tr>
<tr class="memdesc:a256c0ed07e70d0a20922c8e560558256"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current read capacity.  <a href="#a256c0ed07e70d0a20922c8e560558256">More...</a><br /></td></tr>
<tr class="separator:a256c0ed07e70d0a20922c8e560558256"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a884865494c298d2842580eed0b8ddb36"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRingBuffer.html#a884865494c298d2842580eed0b8ddb36">Write</a> (const char *start, unsigned long count)</td></tr>
<tr class="memdesc:a884865494c298d2842580eed0b8ddb36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes samples from an array into the ring buffer.  <a href="#a884865494c298d2842580eed0b8ddb36">More...</a><br /></td></tr>
<tr class="separator:a884865494c298d2842580eed0b8ddb36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00dd46d66bef019d57a1d72e76ea9101"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRingBuffer.html#a00dd46d66bef019d57a1d72e76ea9101">Read</a> (char *start, unsigned long count)</td></tr>
<tr class="memdesc:a00dd46d66bef019d57a1d72e76ea9101"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads samples from the ring buffer into an array.  <a href="#a00dd46d66bef019d57a1d72e76ea9101">More...</a><br /></td></tr>
<tr class="separator:a00dd46d66bef019d57a1d72e76ea9101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66d87ffb1eb3ea864cb2ecc6dd09e507"><td class="memItemLeft" align="right" valign="top"><a id="a66d87ffb1eb3ea864cb2ecc6dd09e507"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRingBuffer.html#a66d87ffb1eb3ea864cb2ecc6dd09e507">Flush</a> ()</td></tr>
<tr class="memdesc:a66d87ffb1eb3ea864cb2ecc6dd09e507"><td class="mdescLeft">&#160;</td><td class="mdescRight">Empties the ring buffer. <br /></td></tr>
<tr class="separator:a66d87ffb1eb3ea864cb2ecc6dd09e507"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:ab6d32ddff9442239dc3d7ec407ab845a"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRingBuffer.html#ab6d32ddff9442239dc3d7ec407ab845a">CountCast</a> (ring_buffer_size_t count)</td></tr>
<tr class="memdesc:ab6d32ddff9442239dc3d7ec407ab845a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a ring buffer size into an external size.  <a href="#ab6d32ddff9442239dc3d7ec407ab845a">More...</a><br /></td></tr>
<tr class="separator:ab6d32ddff9442239dc3d7ec407ab845a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a8aab7ba395e129264013fef555070127"><td class="memItemLeft" align="right" valign="top"><a id="a8aab7ba395e129264013fef555070127"></a>
char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRingBuffer.html#a8aab7ba395e129264013fef555070127">buffer</a></td></tr>
<tr class="memdesc:a8aab7ba395e129264013fef555070127"><td class="mdescLeft">&#160;</td><td class="mdescRight">The array used by the ringbuffer. <br /></td></tr>
<tr class="separator:a8aab7ba395e129264013fef555070127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9dc807da0c32d155645ae33ff31fe4a"><td class="memItemLeft" align="right" valign="top"><a id="ad9dc807da0c32d155645ae33ff31fe4a"></a>
PaUtilRingBuffer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">rb</a></td></tr>
<tr class="memdesc:ad9dc807da0c32d155645ae33ff31fe4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The internal PortAudio ringbuffer. <br /></td></tr>
<tr class="separator:ad9dc807da0c32d155645ae33ff31fe4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A ring buffer. </p>
<p>This ring buffer is based on the PortAudio ring buffer, provided in the contrib/ directory. This is stable and performs well, but, as it is C code, necessitates some hoop jumping to integrate and could do with being replaced with a native solution. </p>

<p>Definition at line <a class="el" href="ringbuffer_8hpp_source.html#l00024">24</a> of file <a class="el" href="ringbuffer_8hpp_source.html">ringbuffer.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af0150c275335e1f24ee6342f1e52db0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0150c275335e1f24ee6342f1e52db0f">&sect;&nbsp;</a></span>RingBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RingBuffer::RingBuffer </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>power</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="classRingBuffer.html" title="A ring buffer. ">RingBuffer</a>. </p>
<ul>
<li>Precondition: 0 &lt; power, 0 &lt; size.</li>
<li>Postcondition: The <a class="el" href="classRingBuffer.html" title="A ring buffer. ">RingBuffer</a> is fully initialised.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">power</td><td>n, where 2^n is the number of elements in the ring buffer. </td></tr>
    <tr><td class="paramname">size</td><td>The size of one element in the ring buffer. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ringbuffer_8cpp_source.html#l00019">19</a> of file <a class="el" href="ringbuffer_8cpp_source.html">ringbuffer.cpp</a>.</p>

<p>References <a class="el" href="ringbuffer_8hpp_source.html#l00111">buffer</a>, <a class="el" href="messages_8h_source.html#l00088">MSG_OUTPUT_RINGINIT</a>, and <a class="el" href="ringbuffer_8hpp_source.html#l00112">rb</a>.</p>
<div class="fragment"><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;{</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="keywordflow">if</span> (power &lt;= 0) <span class="keywordflow">throw</span> <a class="code" href="classInternalError.html">InternalError</a>(<span class="stringliteral">&quot;ringbuffer power must be positive&quot;</span>);</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keywordflow">if</span> (size &lt;= 0) <span class="keywordflow">throw</span> <a class="code" href="classInternalError.html">InternalError</a>(<span class="stringliteral">&quot;ringbuffer element size must be positive&quot;</span>);</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    this-&gt;<a class="code" href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">rb</a> = <span class="keyword">new</span> PaUtilRingBuffer;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    this-&gt;<a class="code" href="classRingBuffer.html#a8aab7ba395e129264013fef555070127">buffer</a> = <span class="keyword">new</span> <span class="keywordtype">char</span>[(1 &lt;&lt; power) * size];</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordflow">if</span> (PaUtil_InitializeRingBuffer(</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                this-&gt;<a class="code" href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">rb</a>, size, static_cast&lt;ring_buffer_size_t&gt;(1 &lt;&lt; power),</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                this-&gt;<a class="code" href="classRingBuffer.html#a8aab7ba395e129264013fef555070127">buffer</a>) != 0) {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classInternalError.html">InternalError</a>(<a class="code" href="messages_8h.html#a3bf0477dded19418d7ecac95aeae8856">MSG_OUTPUT_RINGINIT</a>);</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    }</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    assert(this-&gt;<a class="code" href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">rb</a> != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    assert(this-&gt;<a class="code" href="classRingBuffer.html#a8aab7ba395e129264013fef555070127">buffer</a> != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div><div class="ttc" id="classRingBuffer_html_a8aab7ba395e129264013fef555070127"><div class="ttname"><a href="classRingBuffer.html#a8aab7ba395e129264013fef555070127">RingBuffer::buffer</a></div><div class="ttdeci">char * buffer</div><div class="ttdoc">The array used by the ringbuffer. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8hpp_source.html#l00111">ringbuffer.hpp:111</a></div></div>
<div class="ttc" id="classRingBuffer_html_ad9dc807da0c32d155645ae33ff31fe4a"><div class="ttname"><a href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">RingBuffer::rb</a></div><div class="ttdeci">PaUtilRingBuffer * rb</div><div class="ttdoc">The internal PortAudio ringbuffer. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8hpp_source.html#l00112">ringbuffer.hpp:112</a></div></div>
<div class="ttc" id="messages_8h_html_a3bf0477dded19418d7ecac95aeae8856"><div class="ttname"><a href="messages_8h.html#a3bf0477dded19418d7ecac95aeae8856">MSG_OUTPUT_RINGINIT</a></div><div class="ttdeci">const std::string MSG_OUTPUT_RINGINIT</div><div class="ttdoc">Message shown when there is an error initialising the ring buffer. </div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00088">messages.h:88</a></div></div>
<div class="ttc" id="classInternalError_html"><div class="ttname"><a href="classInternalError.html">InternalError</a></div><div class="ttdoc">An Error signifying that playd has hit an internal snag. </div><div class="ttdef"><b>Definition:</b> <a href="errors_8hpp_source.html#l00060">errors.hpp:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab6d32ddff9442239dc3d7ec407ab845a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6d32ddff9442239dc3d7ec407ab845a">&sect;&nbsp;</a></span>CountCast()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long RingBuffer::CountCast </td>
          <td>(</td>
          <td class="paramtype">ring_buffer_size_t&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts a ring buffer size into an external size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>The size/count in PortAudio form. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The size/count after casting to unsigned long. </dd></dl>

<p>Definition at line <a class="el" href="ringbuffer_8cpp_source.html#l00080">80</a> of file <a class="el" href="ringbuffer_8cpp_source.html">ringbuffer.cpp</a>.</p>

<p>Referenced by <a class="el" href="ringbuffer_8cpp_source.html#l00065">Read()</a>, <a class="el" href="ringbuffer_8cpp_source.html#l00051">ReadCapacity()</a>, <a class="el" href="ringbuffer_8cpp_source.html#l00056">Write()</a>, and <a class="el" href="ringbuffer_8cpp_source.html#l00046">WriteCapacity()</a>.</p>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;{</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(count);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a00dd46d66bef019d57a1d72e76ea9101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00dd46d66bef019d57a1d72e76ea9101">&sect;&nbsp;</a></span>Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long RingBuffer::Read </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads samples from the ring buffer into an array. </p>
<p>To read one sample, pass a count of 1 and take a pointer to the sample variable.</p>
<ul>
<li>Precondition: start points to a valid array, 0 &lt; count &lt;= the size of the block of memory pointed to by start, count &lt;= <a class="el" href="classRingBuffer.html#a256c0ed07e70d0a20922c8e560558256" title="The current read capacity. ">ReadCapacity()</a>.</li>
<li>Postcondition: The block of memory pointed to by start and bounded by count and <a class="el" href="classRingBuffer.html#a256c0ed07e70d0a20922c8e560558256" title="The current read capacity. ">ReadCapacity()</a> has been filled with the appropriate number of samples from the front of the ring buffer.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>The start of the array buffer to which we write samples. Must not be nullptr. </td></tr>
    <tr><td class="paramname">count</td><td>The number of samples to read. This must not exceed the minimum of <a class="el" href="classRingBuffer.html#a256c0ed07e70d0a20922c8e560558256" title="The current read capacity. ">ReadCapacity()</a> and the length of the array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of samples read, which should not exceed count. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classRingBuffer.html#a256c0ed07e70d0a20922c8e560558256" title="The current read capacity. ">ReadCapacity</a> </dd></dl>

<p>Definition at line <a class="el" href="ringbuffer_8cpp_source.html#l00065">65</a> of file <a class="el" href="ringbuffer_8cpp_source.html">ringbuffer.cpp</a>.</p>

<p>References <a class="el" href="ringbuffer_8cpp_source.html#l00080">CountCast()</a>, <a class="el" href="ringbuffer_8hpp_source.html#l00112">rb</a>, and <a class="el" href="ringbuffer_8cpp_source.html#l00051">ReadCapacity()</a>.</p>

<p>Referenced by <a class="el" href="audio__sink_8cpp_source.html#l00195">SdlAudioSink::Callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (count == 0) <span class="keywordflow">throw</span> <a class="code" href="classInternalError.html">InternalError</a>(<span class="stringliteral">&quot;tried to read 0 items from ringbuffer&quot;</span>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classRingBuffer.html#a256c0ed07e70d0a20922c8e560558256">ReadCapacity</a>() &lt; count) <span class="keywordflow">throw</span> <a class="code" href="classInternalError.html">InternalError</a>(<span class="stringliteral">&quot;ringbuffer underflow&quot;</span>);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRingBuffer.html#ab6d32ddff9442239dc3d7ec407ab845a">CountCast</a>(PaUtil_ReadRingBuffer(</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            this-&gt;<a class="code" href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">rb</a>, start, static_cast&lt;ring_buffer_size_t&gt;(count)));</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div><div class="ttc" id="classRingBuffer_html_ad9dc807da0c32d155645ae33ff31fe4a"><div class="ttname"><a href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">RingBuffer::rb</a></div><div class="ttdeci">PaUtilRingBuffer * rb</div><div class="ttdoc">The internal PortAudio ringbuffer. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8hpp_source.html#l00112">ringbuffer.hpp:112</a></div></div>
<div class="ttc" id="classInternalError_html"><div class="ttname"><a href="classInternalError.html">InternalError</a></div><div class="ttdoc">An Error signifying that playd has hit an internal snag. </div><div class="ttdef"><b>Definition:</b> <a href="errors_8hpp_source.html#l00060">errors.hpp:60</a></div></div>
<div class="ttc" id="classRingBuffer_html_a256c0ed07e70d0a20922c8e560558256"><div class="ttname"><a href="classRingBuffer.html#a256c0ed07e70d0a20922c8e560558256">RingBuffer::ReadCapacity</a></div><div class="ttdeci">size_t ReadCapacity() const</div><div class="ttdoc">The current read capacity. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8cpp_source.html#l00051">ringbuffer.cpp:51</a></div></div>
<div class="ttc" id="classRingBuffer_html_ab6d32ddff9442239dc3d7ec407ab845a"><div class="ttname"><a href="classRingBuffer.html#ab6d32ddff9442239dc3d7ec407ab845a">RingBuffer::CountCast</a></div><div class="ttdeci">static unsigned long CountCast(ring_buffer_size_t count)</div><div class="ttdoc">Converts a ring buffer size into an external size. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8cpp_source.html#l00080">ringbuffer.cpp:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a256c0ed07e70d0a20922c8e560558256"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256c0ed07e70d0a20922c8e560558256">&sect;&nbsp;</a></span>ReadCapacity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t RingBuffer::ReadCapacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The current read capacity. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of samples available in this ring buffer. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classRingBuffer.html#a00dd46d66bef019d57a1d72e76ea9101" title="Reads samples from the ring buffer into an array. ">Read</a> </dd></dl>

<p>Definition at line <a class="el" href="ringbuffer_8cpp_source.html#l00051">51</a> of file <a class="el" href="ringbuffer_8cpp_source.html">ringbuffer.cpp</a>.</p>

<p>References <a class="el" href="ringbuffer_8cpp_source.html#l00080">CountCast()</a>, and <a class="el" href="ringbuffer_8hpp_source.html#l00112">rb</a>.</p>

<p>Referenced by <a class="el" href="audio__sink_8cpp_source.html#l00195">SdlAudioSink::Callback()</a>, <a class="el" href="ringbuffer_8cpp_source.html#l00074">Flush()</a>, and <a class="el" href="ringbuffer_8cpp_source.html#l00065">Read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRingBuffer.html#ab6d32ddff9442239dc3d7ec407ab845a">CountCast</a>(PaUtil_GetRingBufferReadAvailable(this-&gt;<a class="code" href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">rb</a>));</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div><div class="ttc" id="classRingBuffer_html_ad9dc807da0c32d155645ae33ff31fe4a"><div class="ttname"><a href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">RingBuffer::rb</a></div><div class="ttdeci">PaUtilRingBuffer * rb</div><div class="ttdoc">The internal PortAudio ringbuffer. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8hpp_source.html#l00112">ringbuffer.hpp:112</a></div></div>
<div class="ttc" id="classRingBuffer_html_ab6d32ddff9442239dc3d7ec407ab845a"><div class="ttname"><a href="classRingBuffer.html#ab6d32ddff9442239dc3d7ec407ab845a">RingBuffer::CountCast</a></div><div class="ttdeci">static unsigned long CountCast(ring_buffer_size_t count)</div><div class="ttdoc">Converts a ring buffer size into an external size. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8cpp_source.html#l00080">ringbuffer.cpp:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a884865494c298d2842580eed0b8ddb36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a884865494c298d2842580eed0b8ddb36">&sect;&nbsp;</a></span>Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long RingBuffer::Write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes samples from an array into the ring buffer. </p>
<p>To write one sample, pass a count of 1 and take a pointer to the sample variable. Note that start pointer is not constant. This is because the underlying implementation of the ring buffer might not guarantee that the array is left untouched.</p>
<ul>
<li>Precondition: start points to a valid array, 0 &lt; count &lt;= the size of the block of memory pointed to by start, count &lt;= <a class="el" href="classRingBuffer.html#a2cfead01f01634798600b16978ad7514" title="The current write capacity. ">WriteCapacity()</a>.</li>
<li>Postcondition: The ringbuffer has been written to with the contents of the memory pointed to by start and bounded by count and <a class="el" href="classRingBuffer.html#a2cfead01f01634798600b16978ad7514" title="The current write capacity. ">WriteCapacity()</a>.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>The start of the array buffer from which we read samples. Must not be nullptr. </td></tr>
    <tr><td class="paramname">count</td><td>The number of samples to write. This must not exceed the minimum of <a class="el" href="classRingBuffer.html#a2cfead01f01634798600b16978ad7514" title="The current write capacity. ">WriteCapacity()</a> and the length of the array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of samples written, which should not exceed count. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classRingBuffer.html#a2cfead01f01634798600b16978ad7514" title="The current write capacity. ">WriteCapacity</a> </dd></dl>

<p>Definition at line <a class="el" href="ringbuffer_8cpp_source.html#l00056">56</a> of file <a class="el" href="ringbuffer_8cpp_source.html">ringbuffer.cpp</a>.</p>

<p>References <a class="el" href="ringbuffer_8cpp_source.html#l00080">CountCast()</a>, <a class="el" href="ringbuffer_8hpp_source.html#l00112">rb</a>, and <a class="el" href="ringbuffer_8cpp_source.html#l00046">WriteCapacity()</a>.</p>

<p>Referenced by <a class="el" href="audio__sink_8cpp_source.html#l00165">SdlAudioSink::Transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">if</span> (count == 0) <span class="keywordflow">throw</span> <a class="code" href="classInternalError.html">InternalError</a>(<span class="stringliteral">&quot;tried to store 0 items in ringbuffer&quot;</span>);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classRingBuffer.html#a2cfead01f01634798600b16978ad7514">WriteCapacity</a>() &lt; count) <span class="keywordflow">throw</span> <a class="code" href="classInternalError.html">InternalError</a>(<span class="stringliteral">&quot;ringbuffer overflow&quot;</span>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRingBuffer.html#ab6d32ddff9442239dc3d7ec407ab845a">CountCast</a>(PaUtil_WriteRingBuffer(</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            this-&gt;<a class="code" href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">rb</a>, start, static_cast&lt;ring_buffer_size_t&gt;(count)));</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div><div class="ttc" id="classRingBuffer_html_ad9dc807da0c32d155645ae33ff31fe4a"><div class="ttname"><a href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">RingBuffer::rb</a></div><div class="ttdeci">PaUtilRingBuffer * rb</div><div class="ttdoc">The internal PortAudio ringbuffer. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8hpp_source.html#l00112">ringbuffer.hpp:112</a></div></div>
<div class="ttc" id="classRingBuffer_html_a2cfead01f01634798600b16978ad7514"><div class="ttname"><a href="classRingBuffer.html#a2cfead01f01634798600b16978ad7514">RingBuffer::WriteCapacity</a></div><div class="ttdeci">size_t WriteCapacity() const</div><div class="ttdoc">The current write capacity. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8cpp_source.html#l00046">ringbuffer.cpp:46</a></div></div>
<div class="ttc" id="classInternalError_html"><div class="ttname"><a href="classInternalError.html">InternalError</a></div><div class="ttdoc">An Error signifying that playd has hit an internal snag. </div><div class="ttdef"><b>Definition:</b> <a href="errors_8hpp_source.html#l00060">errors.hpp:60</a></div></div>
<div class="ttc" id="classRingBuffer_html_ab6d32ddff9442239dc3d7ec407ab845a"><div class="ttname"><a href="classRingBuffer.html#ab6d32ddff9442239dc3d7ec407ab845a">RingBuffer::CountCast</a></div><div class="ttdeci">static unsigned long CountCast(ring_buffer_size_t count)</div><div class="ttdoc">Converts a ring buffer size into an external size. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8cpp_source.html#l00080">ringbuffer.cpp:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2cfead01f01634798600b16978ad7514"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cfead01f01634798600b16978ad7514">&sect;&nbsp;</a></span>WriteCapacity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t RingBuffer::WriteCapacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The current write capacity. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of samples this ring buffer has space to store. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classRingBuffer.html#a884865494c298d2842580eed0b8ddb36" title="Writes samples from an array into the ring buffer. ">Write</a> </dd></dl>

<p>Definition at line <a class="el" href="ringbuffer_8cpp_source.html#l00046">46</a> of file <a class="el" href="ringbuffer_8cpp_source.html">ringbuffer.cpp</a>.</p>

<p>References <a class="el" href="ringbuffer_8cpp_source.html#l00080">CountCast()</a>, and <a class="el" href="ringbuffer_8hpp_source.html#l00112">rb</a>.</p>

<p>Referenced by <a class="el" href="audio__sink_8cpp_source.html#l00165">SdlAudioSink::Transfer()</a>, and <a class="el" href="ringbuffer_8cpp_source.html#l00056">Write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;{</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRingBuffer.html#ab6d32ddff9442239dc3d7ec407ab845a">CountCast</a>(PaUtil_GetRingBufferWriteAvailable(this-&gt;<a class="code" href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">rb</a>));</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div><div class="ttc" id="classRingBuffer_html_ad9dc807da0c32d155645ae33ff31fe4a"><div class="ttname"><a href="classRingBuffer.html#ad9dc807da0c32d155645ae33ff31fe4a">RingBuffer::rb</a></div><div class="ttdeci">PaUtilRingBuffer * rb</div><div class="ttdoc">The internal PortAudio ringbuffer. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8hpp_source.html#l00112">ringbuffer.hpp:112</a></div></div>
<div class="ttc" id="classRingBuffer_html_ab6d32ddff9442239dc3d7ec407ab845a"><div class="ttname"><a href="classRingBuffer.html#ab6d32ddff9442239dc3d7ec407ab845a">RingBuffer::CountCast</a></div><div class="ttdeci">static unsigned long CountCast(ring_buffer_size_t count)</div><div class="ttdoc">Converts a ring buffer size into an external size. </div><div class="ttdef"><b>Definition:</b> <a href="ringbuffer_8cpp_source.html#l00080">ringbuffer.cpp:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/audio/<a class="el" href="ringbuffer_8hpp_source.html">ringbuffer.hpp</a></li>
<li>src/audio/<a class="el" href="ringbuffer_8cpp_source.html">ringbuffer.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classRingBuffer.html">RingBuffer</a></li>
    <li class="footer">Generated on Mon Sep 12 2016 21:01:23 for URY playd by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
